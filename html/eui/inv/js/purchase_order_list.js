dwap.page.opnref=function(){ajaxget("/",{_sqlid:"vwltsa^opnrefs",_func:"get",_combo:"y",_subcon:"y",one_pol_one_opn:"y"},function(e){$('#_dgform > form input[textboxname="WOREF"]').combobox("loadData",e)})},dwap.page.part=function(){ajaxget("/",{_sqlid:"inv^partid",_func:"get",_combo:"y"},function(e){$('#_dgform > form input[textboxname="PART_ID"]').combobox("loadData",e)})},$(document).ready(function(){dwap.page.opnref(),dwap.page.part(),$("#sv_closed").click(),$("#po_closed").click(),$("#PO_LIST_DG").datagrid("rowEditor",{url:"/?_sqlid=inv^polist&_func=get&_dgrid=y&PO_TYPE=G",rownumbers:!1,editor:"form",fitColumns:!0,singleSelect:!0,striped:!0,fit:!0,addData:{AMOUNT:0,QTY:0},columns:[[{field:"ROWID",hidden:!0},{field:"PO_ID",title:"PO ID",width:100,fixed:!0,editor:{type:"textbox",options:{required:!0}}},{field:"LINE_NO",title:"Line #",width:35,fixed:!0,editor:{type:"numberspinner",options:{required:!0,min:1,value:0,precision:0}}},{field:"LINE_STATUS",title:"Status",width:80,fixed:!0,editor:{type:"combobox",options:{data:[{value:"R",text:"Released"},{value:"C",text:"Closed"},{value:"H",text:"On-Hold"}],required:!0}}},{field:"EST_RECEIPT_DATE",title:"Want Date",width:80,fixed:!0,editor:{type:"datebox",options:{required:!0}},formatter:eui.date},{field:"QTY",title:"Reqd",align:"right",width:60,fixed:!0,formatter:function(e){return e||0},editor:{type:"numberspinner",options:{required:!0,min:0,value:0,precision:2}}},{field:"QTY_RECV",title:"Recv",width:60,fixed:!0,_editor:{type:"numberbox",options:{readonly:!0,precision:0,value:2}}},{field:"PART_ID",title:"Part ID",width:150,fixed:!0,editor:{type:"combobox",options:{_url:"?_func=get&_sqlid=inv^partid&_combo=y",required:!0,panelWidth:200,init:!1,onSelect:function(e){$(this);var t=$("#PO_LIST_DG"),i=(t.datagrid("getRows"),t.datagrid("options"));if(i){var o=$(i.tbar.form);o.find('input[textboxname="DESCRIPTION"]').textbox("setValue",e.DESCRIPTION),o.find('input[textboxname="UOM_ID"]').textbox("setValue",e.UOM_ID),o.find('input[textboxname="PRODUCT_CODE"]').textbox("setValue",e.PRODUCT_CODE)}}}}},{field:"UOM_ID",title:"UOM",width:60,fixed:!0,editor:{type:"textbox",options:{readonly:!0}}},{field:"PRODUCT_CODE",title:"Prod Code",width:80,fixed:!0,editor:{type:"textbox",options:{readonly:!0}}},{field:"DESCRIPTION",title:"Description",width:200,fixed:!1,editor:{type:"textbox",options:{readonly:!0}}}]],onEndEdit:function(e,t,i){var o=clone(t);o.PO_TYPE="G";["DESCRIPTION","UOM_ID","PRODUCT_CODE"].map(function(e){delete o[e]}),ajaxget("/?_sqlid=inv^polist",o,function(e){dwap.page.opnref(),$("#PO_LIST_DG").datagrid("reload")})}}),$("#PO_LIST_DG").datagrid("options").toolbar.append('<a href="#" id="po_closed"></a>'),$("#po_closed").linkbutton({text:"Hide Closed",toggle:!0,onClick:function(){var e=$(this).linkbutton("options").selected,t=$("#PO_LIST_DG");e?t.datagrid("findRows",{LINE_STATUS:["Closed"]}).idxs.map(function(e){t.datagrid("hideRow",e)}):t.datagrid("load")}}),$("#PO_LIST_SV").datagrid("rowEditor",{url:"/?_sqlid=inv^polist&_func=get&_dgrid=y&PO_TYPE=S",rownumbers:!1,editor:"form",fitColumns:!0,singleSelect:!0,striped:!0,fit:!0,addData:{AMOUNT:0,QTY:0},columns:[[{field:"ROWID",hidden:!0},{field:"PO_ID",title:"PO ID",width:100,fixed:!0,editor:{type:"textbox",options:{required:!0}}},{field:"LINE_NO",title:"Line #",width:35,fixed:!0,editor:{type:"numberspinner",options:{required:!0,min:1,value:0,precision:0}}},{field:"LINE_STATUS",title:"Status",width:80,fixed:!0,editor:{type:"combobox",options:{data:[{value:"R",text:"Released"},{value:"C",text:"Closed"},{value:"H",text:"On-Hold"}],required:!0}}},{field:"EST_RECEIPT_DATE",title:"Want Date",width:80,fixed:!0,editor:{type:"datebox",options:{required:!0}},formatter:eui.date},{field:"WOREF",title:"Opn Ref",width:150,fixed:!0,editor:{type:"combobox",options:{__url:"?_func=get&_sqlid=vwltsa^opnrefs&_combo=y&_subcon=y&one_pol_one_opn=y",required:!0,panelWidth:200,init:!0,validType:["inList"]}}},{field:"AMOUNT",title:"Amount",width:40,fixed:!1,editor:{type:"numberspinner",options:{required:!0,min:0,value:0,precision:2}}}]],onEndEdit:function(e,t,i){var o=clone(t);o.PO_TYPE="S";["DESCRIPTION","UOM_ID","PRODUCT_CODE"].map(function(e){delete o[e]}),ajaxget("/?_sqlid=inv^polist",o,function(e){dwap.page.opnref(),$("#PO_LIST_SV").datagrid("reload")})}}),$("#PO_LIST_SV").datagrid("options").toolbar.append('<a href="#" id="sv_closed"></a>'),$("#sv_closed").linkbutton({text:"Hide Closed",toggle:!0,onClick:function(){var e=$(this).linkbutton("options").selected,t=$("#PO_LIST_SV");e?t.datagrid("findRows",{LINE_STATUS:["Closed"]}).idxs.map(function(e){t.datagrid("hideRow",e)}):t.datagrid("load")}})});