dwap.page.dodgrid=function(){$("#txgrid").datagrid({toolbar:"#tbar",fit:!0,fitColumns:!0,queryParams:frm2dic($("form#gfilter")),url:"/?_func=get&_sqlid=inv^part_trace",checkOnSelect:!1,singleSelect:!0,method:"get",striped:!0,columns:[[{field:"EDIT",title:"Edit",checkbox:!0},{field:"PART_ID",title:"Part ID",width:200,fixed:!0},{field:"TRACE_ID",title:"Trace ID",width:80,fixed:!0},{field:"TRACE_DATE",title:"Trace Date",formatter:iso2str,width:80,fixed:!0},{field:"EXPIRY_DATE",title:"Expiry Date",formatter:iso2str,width:80,fixed:!0},{field:"UNIT_MATERIAL_COST",title:"Unit Material Cost",width:80,fixed:!0},{field:"TRACE_USER_1",title:"Trace User 1",width:80,fixed:!0},{field:"TRACE_USER_2",title:"Trace User 2",width:80,fixed:!0},{field:"TRACE_USER_3",title:"Trace User 3",width:80,fixed:!0},{field:"TRACE_USER_4",title:"Trace User 4",width:80,fixed:!0},{field:"TRACE_USER_5",title:"Trace User 5",width:80,fixed:!0},{field:"TRACE_USER_6",title:"Trace User 6",width:80,fixed:!0},{field:"TRACE_USER_7",title:"Trace User 7",width:80,fixed:!0},{field:"TRACE_USER_8",title:"Trace User 8",width:80,fixed:!0},{field:"TRACE_USER_9",title:"Trace User 9",width:80,fixed:!0},{field:"TRACE_USER_10",title:"Trace User 10",width:80,fixed:!0}]],onBeforeLoad:function(t){if(!t.sdate)return!1},onCheck:function(t,e){$(this).data("idx",t);var i=$("form#parttrans");for(var d in i.attr("mode","upd").form("load",e),e)if(0==d.indexOf("TRACE_USER_")){var r=$("div#traceprop div.fitem#"+d),f=r.find("label.trace");r.find("input.textbox-f");""!=e[d]?(f.text(e[d].replace("*","")),r.show()):r.hide()}setTimeout(function(){butEn("sx")},300)},onLoadSuccess:function(){$("form#parttrans").form("clear")}})},$(document).ready(function(){$("#but_save").linkbutton({onClick:function(){var t=$("form#parttrans"),e=frm2dic(t),i=$("#txgrid");i.datagrid("updateRow",{index:i.data("idx"),row:e}),t.form("options").queryParams={_func:"upd",_sqlid:"inv^part_trace"},t.form("submit")}}),setTimeout(function(){dwap.page.dodgrid(),$("form#gfilter").form({onChange:function(){$("#txgrid").datagrid("reload",frm2dic($("form#gfilter")))}})})});