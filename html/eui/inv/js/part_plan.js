dwap.page.docref=function(e,a){if(!e)return"";var t=e.replace(/\^/g,"."),r=t.split(".");if("Supply"==a.PLAN_TYPE){if(e==a.DD_REF)var i="demand",d="vwltsa^sa_sorder&ID="+r[0];if(e==a.SS_REF){i="supply";if("Job"==a.DOC_TYPE)d="vwltsa^sa_jobman&WOREF="+r[0];if("PO"==a.DOC_TYPE)d="inv^purchase_order_list"}}if("Demand"==a.PLAN_TYPE){i="demand";if("SO"==a.DOC_TYPE)d="sales^sa_sorder&ID="+r[0];if("Opn"==a.DOC_TYPE||"Job"==a.DOC_TYPE)d="vwltsa^sa_jobman&WOREF="+r[0]}return"<a href='javascript:newtab(\""+d+"\");'><span class='"+i+"'>"+t+"</span></a>"},dwap.page.integer=function(e){var a=eui.integer(e);return a<0?'<span class="negative">'+a+"</span>":a},dwap.page.ssdd=function(e,a){var t=eui.integer(e);return"0.00"===t?"":"Supply"==a.PLAN_TYPE?'<span class="supply">'+t+"</span>":"Demand"==a.PLAN_TYPE?'<span class="demand">'+t+"</span>":void 0},dwap.page.dd=function(e,a){var t=eui.integer(e);return"0.00"===t?"":'<span class="demand">'+t+"</span>"},dwap.page.ss=function(e,a){var t=eui.integer(e);return"0.00"===t?"":'<span class="supply">'+t+"</span>"},$("#partplan").datagrid({rowStyler:function(e,a){if(a.PART_ID)return{class:"partrow"}},toolbar:"#tbar",fit:!0,fitColumns:!0,queryParams:frm2dic($("form#gFilter")),url:"/?_sqlid=inv^partplan&_func=get",checkOnSelect:!1,singleSelect:!0,columns:[[{field:"PART_ID",title:"Part ID"},{field:"PRODUCT_CODE",title:"Product Code"},{field:"UOM_ID",title:"UOM"},{field:"WANT_DATE",title:"Want Date",formatter:eui.date,width:80,fixed:!0},{field:"DOC_TYPE",title:"Order Type",formatter:function(e){return e.toUpperCase()}},{field:"DEMAND_DOC",title:"Demand Order",formatter:dwap.page.docref,width:100,fixed:!0},{field:"DEMAND_QTY",title:"Demand Qty",formatter:dwap.page.dd,width:80,fixed:!0,align:"right"},{field:"PROJ_QTY",title:"Projected Bal",formatter:dwap.page.integer,width:80,fixed:!0,align:"right"},{field:"SUPPLY_DOC",title:"Supply Order",formatter:dwap.page.docref,width:100,fixed:!0},{field:"SUPPLY_QTY",title:"Supply Qty",formatter:dwap.page.ss,width:80,fixed:!0,align:"right"},{field:"DESCRIPTION",title:"Description",width:200,fixed:!1}]],onLoadSuccess:function(e){}}).datagrid("columns",$("#colsel")),$(document).ready(function(){$("form#gfilter #PART_ID_").qbe({defid:"part"}),$("form#gfilter").form({onChange:function(){$("#partplan").datagrid("reload",frm2dic($("form#gfilter")))}})});